<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>数据结构与算法之2-3-4树 - Bing's Blog</title><meta name=keywords content="[Life bbing bing hugo Blog C++ LoveIt]"><meta name=Description content="个人技术博客"><meta property="og:title" content="数据结构与算法之2-3-4树"><meta property="og:description" content="平衡树
对于一个普通的二叉查找树, 我们可以发现一个问题, 存在一定的可能性, 一般的二叉查找树会退化成一般的链表."><meta property="og:type" content="article"><meta property="og:url" content="https://imcbc.cn/202102/salgo-234tree/"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/caibingcheng/resources@main/images/13bOkrO.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-02-20T10:37:39+08:00"><meta property="article:modified_time" content="2021-02-20T10:37:39+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://cdn.jsdelivr.net/gh/caibingcheng/resources@main/images/13bOkrO.png"><meta name=twitter:title content="数据结构与算法之2-3-4树"><meta name=twitter:description content="平衡树
对于一个普通的二叉查找树, 我们可以发现一个问题, 存在一定的可能性, 一般的二叉查找树会退化成一般的链表."><meta name=application-name content="Bing's Blog"><meta name=apple-mobile-web-app-title content="Bing's Blog"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://imcbc.cn/202102/salgo-234tree/><link rel=prev href=https://imcbc.cn/202102/salgo-binschtree/><link rel=next href=https://imcbc.cn/202102/cpp-closure/><link rel=stylesheet href=https://fastly.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=https://fastly.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css><link rel=stylesheet href=https://fastly.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css><link rel=stylesheet href=https://fastly.jsdelivr.net/gh/Albejr/jquery-albe-timeline/templates/simple/style-albe-timeline.css><link rel=stylesheet href=https://fastly.jsdelivr.net/gh/caibingcheng/orlike@client/orlike.min.css><link rel=stylesheet href=/css/custom.css><meta name=google-site-verification content="xy1bCgQPV_H3_o2XD34o2mIByQxmzkV3GPOfhXg_mTM"><meta name=msvalidate.01 content="c81a65b6344571786df543a56c7bbe18"><meta name=baidu-site-verification content="code-WcyzWjgFYo"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"数据结构与算法之2-3-4树","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/imcbc.cn\/202102\/salgo-234tree\/"},"image":["https:\/\/imcbc.cn\/android-chrome-192x192.png"],"genre":"posts","keywords":"二叉树, 2-3-4树, 平衡树, 查找, 搜索","wordcount":2013,"url":"https:\/\/imcbc.cn\/202102\/salgo-234tree\/","datePublished":"2021-02-20T10:37:39+08:00","dateModified":"2021-02-20T10:37:39+08:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"Bing","logo":"https:\/\/imcbc.cn\/android-chrome-192x192.png"},"author":{"@type":"Person","name":"bbing"},"description":""}</script></head><body header-desktop=normal header-mobile=normal><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><a href=https://github.com/caibingcheng/ class=github-corner aria-label="View source on GitHub"><svg width="3.5rem" height="3.5rem" viewBox="0 0 250 250" style="fill:#151513;color:#fff;position:absolute;top:0;border:0;left:0;transform:scale(-1,1)" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div class=header-title><a href=/ title="Bing's Blog">Bing's Blog</a></div><div class=menu><div class=menu-inner><div class=dropdown><a href=/posts/ class="menu-item menu-more dropbtn" title><i class='fas fa fa-archive'></i> 归档</a><div class="menu-more-content dropdown-content"><a href=/tags/ title><i class='fas fa fa-tag'></i> 标签 </a><a href=/categories/ title><i class='fas fa fa-th'></i> 分类</a></div></div><a class=menu-item href=/friends/><i class='fas fa fa-users'></i> 友链</a><div class=dropdown><a href=javascript:void(0); class="menu-item menu-more dropbtn" title><i class='fas fa fa-angle-double-down'></i> 更多</a><div class="menu-more-content dropdown-content"><a href=/tools/ title><i class='fas fa fa-cubes'></i> 工具 </a><a href=/about/ title><i class='fas fa fa-address-card'></i> 关于 </a><a href=/timeline/ title><i class='fas fa fa-building'></i> 建站 </a><a href=/index.xml/ title><i class='fas fa fa-rss'></i> RSS</a></div></div><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=搜索文章内容 id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span>
</span><a href=https://travellings.link target=_blank class=menu-item rel=noopener title=开往-友链接力><i class='fas fa-fw fa-subway'></i></a>
<a href=https://rssblog.cn/bbing class=menu-item target=_blank rel=noopener title=RSSBlog><i class='fas fa-fw fa-inbox'></i></a>
<a href=https://www.foreverblog.cn/go.html class=menu-item target=_blank rel=noopener title=穿梭虫洞><i class="fas fa-fw fa-life-ring" title=穿梭虫洞-随机访问十年之约友链博客></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Bing's Blog">Bing's Blog</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章内容 id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></div><a href=/posts/ class=menu-item title><i class='fas fa fa-archive'></i> 归档</a>
<a href=/tags/ class=menu-item title><i class='fas fa fa-tag'></i> 标签</a>
<a href=/categories/ class=menu-item title><i class='fas fa fa-th'></i> 分类</a>
<a class=menu-item href=/friends/><i class='fas fa fa-users'></i> 友链</a>
<a href=/tools/ class=menu-item title><i class='fas fa fa-cubes'></i> 工具</a>
<a href=/about/ class=menu-item title><i class='fas fa fa-address-card'></i> 关于</a>
<a href=/timeline/ class=menu-item title><i class='fas fa fa-building'></i> 建站</a>
<a href=/index.xml/ class=menu-item title><i class='fas fa fa-rss'></i> RSS</a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class=single-title>数据结构与算法之2-3-4树<sup>
<a id=reader-button-title title=阅读模式><i class="fa fa-book fa-fw"></i></a></sup></h1><div class=post-meta><div class=post-meta-line></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2021-02-20>2021-02-20</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 2013 字&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 5 分钟&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#平衡树>平衡树</a></li><li><a href=#2-3-4树>2-3-4树</a></li><li><a href=#查找>查找</a></li><li><a href=#插入>插入</a><ul><li><a href=#插入结点是不满的叶子结点>插入结点是不满的叶子结点</a></li><li><a href=#插入结点是满的叶子结点>插入结点是满的叶子结点</a><ul><li><a href=#调整b元素>调整B元素</a></li><li><a href=#调整c元素>调整C元素</a></li></ul></li><li><a href=#插入结点是满的非叶子结点>插入结点是满的非叶子结点</a><ul><li><a href=#调整b元素-1>调整B元素</a></li><li><a href=#调整c元素-1>调整C元素</a></li></ul></li><li><a href=#总结直接插入和结点分裂>总结:直接插入和结点分裂</a><ul><li><a href=#直接插入>直接插入</a></li><li><a href=#结点分裂>结点分裂</a></li></ul></li></ul></li><li><a href=#删除>删除</a><ul><li><a href=#被删除的元素在非叶子结点>被删除的元素在非叶子结点</a></li><li><a href=#被删除元素在叶子结点>被删除元素在叶子结点</a><ul><li><a href=#被删除元素在叶子结点且不是2结点>被删除元素在叶子结点且不是2结点</a></li><li><a href=#被删除元素在叶子结点且是2结点>被删除元素在叶子结点且是2结点</a></li></ul></li></ul></li><li><a href=#2-3-4树为什么可以保持平衡>2-3-4树为什么可以保持平衡</a></li></ul></nav></div></div><div class=content id=content><h2 id=平衡树>平衡树</h2><p>对于一个普通的二叉查找树, 我们可以发现一个问题, 存在一定的可能性, 一般的二叉查找树会退化成一般的链表.</p><p><figure><a class=lightgallery href=https://bu.dusays.com/2022/06/26/62b87d5f027ea.png title=不太平衡的二叉树 data-thumbnail=https://bu.dusays.com/2022/06/26/62b87d5f027ea.png data-sub-html="<h2>不太平衡的二叉树</h2><p>不太平衡的二叉树</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://bu.dusays.com/2022/06/26/62b87d5f027ea.png data-srcset="https://bu.dusays.com/2022/06/26/62b87d5f027ea.png, https://bu.dusays.com/2022/06/26/62b87d5f027ea.png 1.5x, https://bu.dusays.com/2022/06/26/62b87d5f027ea.png 2x" data-sizes=auto alt=https://bu.dusays.com/2022/06/26/62b87d5f027ea.png></a><figcaption class=image-caption>不太平衡的二叉树</figcaption></figure></p><p>上图还没有完全退化, 但是如果查找6这个结点, 会比其他的叶子结点走更多的路程.</p><p>为了解决一般二叉查找树可能带来的退化问题, 引入了平衡树的概念.</p><blockquote><p>完全二叉树和满二叉树是平衡树.</p></blockquote><p>平衡树的定义就是: <strong>左右子树的高度差不大于1的树.</strong></p><h2 id=2-3-4树>2-3-4树</h2><p><figure><a class=lightgallery href=https://bu.dusays.com/2022/06/26/62b87db504735.png title=2-3-4树 data-thumbnail=https://bu.dusays.com/2022/06/26/62b87db504735.png data-sub-html="<h2>2-3-4树</h2><p>2-3-4树</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://bu.dusays.com/2022/06/26/62b87db504735.png data-srcset="https://bu.dusays.com/2022/06/26/62b87db504735.png, https://bu.dusays.com/2022/06/26/62b87db504735.png 1.5x, https://bu.dusays.com/2022/06/26/62b87db504735.png 2x" data-sizes=auto alt=https://bu.dusays.com/2022/06/26/62b87db504735.png></a><figcaption class=image-caption>2-3-4树</figcaption></figure></p><p>2-3-4树的意思就是二叉/三叉/四叉树.</p><p>简单起见, 可以把2-3-4树定义为四叉树, 一个结点可以存储三个元素和四个孩子结点的指针.</p><p>如上图, 先约定左中右三个元素代号是<code>A</code>, <code>B</code>, <code>C</code>; 从左到右的四个孩子结点的指针是<code>a</code>, <code>b</code>, <code>c</code>, <code>d</code>.</p><p>可以看到, 每个结点元素不一定要填满, 每个子结点指针也不一定要填满.</p><h2 id=查找>查找</h2><p>和二叉查找树类似, 每个结点的子树也是根据元素与结点大小划分的.</p><ul><li><code>a</code>指向<code>P &lt; A</code>的子树;</li><li><code>b</code>指向<code>A &lt; P &lt; B</code>的子树;</li><li><code>c</code>指向<code>B &lt; P &lt; C</code>的子树;</li><li><code>d</code>指向<code>C &lt; P</code>的子树;</li></ul><p>所以, 查找一个结点的时候, 根据被查找元素<code>P</code>与<code>A</code>/<code>B</code>/<code>C</code>的大小关系, 走不同的路径来查找元素.</p><p>以下, 是查找元素<code>4</code>的搜索路径.</p><p><figure><a class=lightgallery href=https://bu.dusays.com/2022/06/26/62b87db7d6ccd.png title=2-3-4树-查找 data-thumbnail=https://bu.dusays.com/2022/06/26/62b87db7d6ccd.png data-sub-html="<h2>2-3-4树-查找</h2><p>2-3-4树-查找</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://bu.dusays.com/2022/06/26/62b87db7d6ccd.png data-srcset="https://bu.dusays.com/2022/06/26/62b87db7d6ccd.png, https://bu.dusays.com/2022/06/26/62b87db7d6ccd.png 1.5x, https://bu.dusays.com/2022/06/26/62b87db7d6ccd.png 2x" data-sizes=auto alt=https://bu.dusays.com/2022/06/26/62b87db7d6ccd.png></a><figcaption class=image-caption>2-3-4树-查找</figcaption></figure></p><h2 id=插入>插入</h2><p>对2-3-4树的插入操作需要分类讨论, 根据不同的情况需要做对应对调整, 使插入后的树依然保持平衡.</p><h3 id=插入结点是不满的叶子结点>插入结点是不满的叶子结点</h3><p><figure><a class=lightgallery href=https://bu.dusays.com/2022/06/26/62b87dbac78a1.png title=2-3-4树-直接插入 data-thumbnail=https://bu.dusays.com/2022/06/26/62b87dbac78a1.png data-sub-html="<h2>2-3-4树-直接插入</h2><p>2-3-4树-直接插入</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://bu.dusays.com/2022/06/26/62b87dbac78a1.png data-srcset="https://bu.dusays.com/2022/06/26/62b87dbac78a1.png, https://bu.dusays.com/2022/06/26/62b87dbac78a1.png 1.5x, https://bu.dusays.com/2022/06/26/62b87dbac78a1.png 2x" data-sizes=auto alt=https://bu.dusays.com/2022/06/26/62b87dbac78a1.png></a><figcaption class=image-caption>2-3-4树-直接插入</figcaption></figure></p><p>对插入结点是不满的叶子结点的情况, 和查找元素类似, 根据大小关系找到被插入元素在树中的位置, 因为结点没有插入满, 所以元素可以直接插入.</p><h3 id=插入结点是满的叶子结点>插入结点是满的叶子结点</h3><p><figure><a class=lightgallery href=https://bu.dusays.com/2022/06/26/62b87eea347b0.png title=2-3-4树-插入满叶子结点 data-thumbnail=https://bu.dusays.com/2022/06/26/62b87eea347b0.png data-sub-html="<h2>2-3-4树-插入满叶子结点</h2><p>2-3-4树-插入满叶子结点</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://bu.dusays.com/2022/06/26/62b87eea347b0.png data-srcset="https://bu.dusays.com/2022/06/26/62b87eea347b0.png, https://bu.dusays.com/2022/06/26/62b87eea347b0.png 1.5x, https://bu.dusays.com/2022/06/26/62b87eea347b0.png 2x" data-sizes=auto alt=https://bu.dusays.com/2022/06/26/62b87eea347b0.png></a><figcaption class=image-caption>2-3-4树-插入满叶子结点</figcaption></figure></p><p>如果发现插入的结点是满叶子结点, 则需要进行调整.</p><p>首先, A元素不动.</p><h4 id=调整b元素>调整B元素</h4><p>我们仅截取需要调整对那颗子树.</p><p><figure><a class=lightgallery href=https://bu.dusays.com/2022/06/26/62b87eec7e968.png title=2-3-4树-调整B元素 data-thumbnail=https://bu.dusays.com/2022/06/26/62b87eec7e968.png data-sub-html="<h2>2-3-4树-调整B元素</h2><p>2-3-4树-调整B元素</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://bu.dusays.com/2022/06/26/62b87eec7e968.png data-srcset="https://bu.dusays.com/2022/06/26/62b87eec7e968.png, https://bu.dusays.com/2022/06/26/62b87eec7e968.png 1.5x, https://bu.dusays.com/2022/06/26/62b87eec7e968.png 2x" data-sizes=auto alt=https://bu.dusays.com/2022/06/26/62b87eec7e968.png></a><figcaption class=image-caption>2-3-4树-调整B元素</figcaption></figure></p><p>将B元素插入到父结点;</p><h4 id=调整c元素>调整C元素</h4><p><figure><a class=lightgallery href=https://bu.dusays.com/2022/06/26/62b87eefadd5e.png title=2-3-4树-调整C元素 data-thumbnail=https://bu.dusays.com/2022/06/26/62b87eefadd5e.png data-sub-html="<h2>2-3-4树-调整C元素</h2><p>2-3-4树-调整C元素</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://bu.dusays.com/2022/06/26/62b87eefadd5e.png data-srcset="https://bu.dusays.com/2022/06/26/62b87eefadd5e.png, https://bu.dusays.com/2022/06/26/62b87eefadd5e.png 1.5x, https://bu.dusays.com/2022/06/26/62b87eefadd5e.png 2x" data-sizes=auto alt=https://bu.dusays.com/2022/06/26/62b87eefadd5e.png></a><figcaption class=image-caption>2-3-4树-调整C元素</figcaption></figure></p><p>新建一个被调整结点对兄弟结点. 将C元素插入兄弟结点.</p><p>所以, 最终的插入结果是</p><p><figure><a class=lightgallery href=https://bu.dusays.com/2022/06/26/62b87ef277e82.png title=2-3-4树-插入后 data-thumbnail=https://bu.dusays.com/2022/06/26/62b87ef277e82.png data-sub-html="<h2>2-3-4树-插入后</h2><p>2-3-4树-插入后</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://bu.dusays.com/2022/06/26/62b87ef277e82.png data-srcset="https://bu.dusays.com/2022/06/26/62b87ef277e82.png, https://bu.dusays.com/2022/06/26/62b87ef277e82.png 1.5x, https://bu.dusays.com/2022/06/26/62b87ef277e82.png 2x" data-sizes=auto alt=https://bu.dusays.com/2022/06/26/62b87ef277e82.png></a><figcaption class=image-caption>2-3-4树-插入后</figcaption></figure></p><h3 id=插入结点是满的非叶子结点>插入结点是满的非叶子结点</h3><p><figure><a class=lightgallery href=https://bu.dusays.com/2022/06/26/62b87ef55d75e.png title=2-3-4树-插入满非叶子结点 data-thumbnail=https://bu.dusays.com/2022/06/26/62b87ef55d75e.png data-sub-html="<h2>2-3-4树-插入满非叶子结点</h2><p>2-3-4树-插入满非叶子结点</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://bu.dusays.com/2022/06/26/62b87ef55d75e.png data-srcset="https://bu.dusays.com/2022/06/26/62b87ef55d75e.png, https://bu.dusays.com/2022/06/26/62b87ef55d75e.png 1.5x, https://bu.dusays.com/2022/06/26/62b87ef55d75e.png 2x" data-sizes=auto alt=https://bu.dusays.com/2022/06/26/62b87ef55d75e.png></a><figcaption class=image-caption>2-3-4树-插入满非叶子结点</figcaption></figure></p><p>如果发现插入的结点是满非叶子结点, 情况稍微复杂一点, 需要考虑被调整结点的子结点.</p><p>同样, A元素不动.</p><h4 id=调整b元素-1>调整B元素</h4><p><figure><a class=lightgallery href=https://bu.dusays.com/2022/06/26/62b87ef87e2db.png title=2-3-4树-调整B元素 data-thumbnail=https://bu.dusays.com/2022/06/26/62b87ef87e2db.png data-sub-html="<h2>2-3-4树-调整B元素</h2><p>2-3-4树-调整B元素</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://bu.dusays.com/2022/06/26/62b87ef87e2db.png data-srcset="https://bu.dusays.com/2022/06/26/62b87ef87e2db.png, https://bu.dusays.com/2022/06/26/62b87ef87e2db.png 1.5x, https://bu.dusays.com/2022/06/26/62b87ef87e2db.png 2x" data-sizes=auto alt=https://bu.dusays.com/2022/06/26/62b87ef87e2db.png></a><figcaption class=image-caption>2-3-4树-调整B元素</figcaption></figure></p><p>如果被调整结点没有父结点, 则新建一个父结点, 将B元素插入父结点.(也就是说, 被调整结点是根结点.)</p><p>如果被调整结点有父结点, 则将B元素插入父结点.</p><h4 id=调整c元素-1>调整C元素</h4><p><figure><a class=lightgallery href=https://bu.dusays.com/2022/06/26/62b87f007499b.png title=2-3-4树-调整C元素 data-thumbnail=https://bu.dusays.com/2022/06/26/62b87f007499b.png data-sub-html="<h2>2-3-4树-调整C元素</h2><p>2-3-4树-调整C元素</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://bu.dusays.com/2022/06/26/62b87f007499b.png data-srcset="https://bu.dusays.com/2022/06/26/62b87f007499b.png, https://bu.dusays.com/2022/06/26/62b87f007499b.png 1.5x, https://bu.dusays.com/2022/06/26/62b87f007499b.png 2x" data-sizes=auto alt=https://bu.dusays.com/2022/06/26/62b87f007499b.png></a><figcaption class=image-caption>2-3-4树-调整C元素</figcaption></figure></p><p>新建一个被调整结点对兄弟结点. 将C元素插入兄弟结点.</p><p>同时, 将<code>c</code>, <code>d</code>也插入到兄弟结点.(这个可以理解为C带着他的左右孩子一起插入到兄弟结点, A带着他的左右孩子一起留在原来的结点)</p><h3 id=总结直接插入和结点分裂>总结:直接插入和结点分裂</h3><p>总结一下上面的操作, 其是就分为两种: 直接插入和分裂后插入</p><h4 id=直接插入>直接插入</h4><p>在元素插入的结点不满的时候, 可以使用直接插入操作, 这里就不再赘述.</p><p><figure><a class=lightgallery href=https://bu.dusays.com/2022/06/26/62b87f030ec1b.png title=2-3-4树-直接插入 data-thumbnail=https://bu.dusays.com/2022/06/26/62b87f030ec1b.png data-sub-html="<h2>2-3-4树-直接插入</h2><p>2-3-4树-直接插入</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://bu.dusays.com/2022/06/26/62b87f030ec1b.png data-srcset="https://bu.dusays.com/2022/06/26/62b87f030ec1b.png, https://bu.dusays.com/2022/06/26/62b87f030ec1b.png 1.5x, https://bu.dusays.com/2022/06/26/62b87f030ec1b.png 2x" data-sizes=auto alt=https://bu.dusays.com/2022/06/26/62b87f030ec1b.png></a><figcaption class=image-caption>2-3-4树-直接插入</figcaption></figure></p><p>元素<code>5</code>直接插入到<code>4</code>的右边.</p><h4 id=结点分裂>结点分裂</h4><p>在元素插入的结点满的时候, 需要进行结点分裂操作. 简单来说, 就是将中间元素放到父结点, 如果没有父结点则新建父结点, 然后将右元素及其孩子分裂出去, 作为当前结点的兄弟结点.</p><p><figure><a class=lightgallery href=https://bu.dusays.com/2022/06/26/62b87f05d6fa4.png title=2-3-4树-分裂 data-thumbnail=https://bu.dusays.com/2022/06/26/62b87f05d6fa4.png data-sub-html="<h2>2-3-4树-分裂</h2><p>2-3-4树-分裂</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://bu.dusays.com/2022/06/26/62b87f05d6fa4.png data-srcset="https://bu.dusays.com/2022/06/26/62b87f05d6fa4.png, https://bu.dusays.com/2022/06/26/62b87f05d6fa4.png 1.5x, https://bu.dusays.com/2022/06/26/62b87f05d6fa4.png 2x" data-sizes=auto alt=https://bu.dusays.com/2022/06/26/62b87f05d6fa4.png></a><figcaption class=image-caption>2-3-4树-分裂</figcaption></figure></p><p>元素<code>6</code>在结点分裂后插入到<code>5</code>的右边.</p><blockquote><p>可以认为, <code>a</code>和<code>b</code>是<code>A</code>的孩子, <code>c</code>和<code>d</code>是<code>C</code>的孩子, 所以<code>A</code>和<code>C</code>移动时, 需要带上自己的孩子.</p></blockquote><h2 id=删除>删除</h2><h3 id=被删除的元素在非叶子结点>被删除的元素在非叶子结点</h3><ol><li>找到被删除元素的位置, 标记为<code>D</code></li><li>中序遍历<code>D</code></li><li>用<code>D</code>的中序遍历的后继元素<code>D'</code>替换<code>D</code>, 将<code>D'</code>作为被删除元素<code>D</code></li><li>如果<code>D</code>在叶子结点, 则退出, 否则回到2</li></ol><p><figure><a class=lightgallery href=https://bu.dusays.com/2022/06/26/62b87f09dd6b6.png title=2-3-4树-删除非叶子结点 data-thumbnail=https://bu.dusays.com/2022/06/26/62b87f09dd6b6.png data-sub-html="<h2>2-3-4树-删除非叶子结点</h2><p>2-3-4树-删除非叶子结点</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://bu.dusays.com/2022/06/26/62b87f09dd6b6.png data-srcset="https://bu.dusays.com/2022/06/26/62b87f09dd6b6.png, https://bu.dusays.com/2022/06/26/62b87f09dd6b6.png 1.5x, https://bu.dusays.com/2022/06/26/62b87f09dd6b6.png 2x" data-sizes=auto alt=https://bu.dusays.com/2022/06/26/62b87f09dd6b6.png></a><figcaption class=image-caption>2-3-4树-删除非叶子结点</figcaption></figure></p><p>如上, 我们要删除元素5, 则先找到元素5, 然后中序遍历, 5的后继元素是7, 则用7替换5;</p><p>再将7的位置标记为待删除元素, 中序遍历之, 其后继元素是8, 所以用8替换, 且8在叶子结点, 则退出;</p><h3 id=被删除元素在叶子结点>被删除元素在叶子结点</h3><h4 id=被删除元素在叶子结点且不是2结点>被删除元素在叶子结点且不是2结点</h4><p>因为没有孩子了, 所以此时直接删除即可.</p><h4 id=被删除元素在叶子结点且是2结点>被删除元素在叶子结点且是2结点</h4><p>如果直接删除, 会让整颗树看起来缺了一块, 按照以下操作:</p><ol><li>删除该元素</li><li>如果兄弟结点不是2结点, 则父结点中的一个元素下移到该结点, 兄弟结点的一个元素上移到父结点, 退出</li><li>如果兄弟结点是2结点且父结点是3或4结点, 则兄弟的元素与父结点合并(实际上是作为插入操作, 插入父结点), 退出</li><li>如果兄弟结点是2结点且父结点是2结点, 则兄弟结点的元素与父结点合并, 形成3结点, 并将该结点作为考察结点, 回到2</li></ol><p>以下:</p><ol><li><p>删除元素6, 则按照规则2<figure><a class=lightgallery href=https://bu.dusays.com/2022/06/26/62b87f0d14a82.png title=2-3-4树-删除-1 data-thumbnail=https://bu.dusays.com/2022/06/26/62b87f0d14a82.png data-sub-html="<h2>2-3-4树-删除-1</h2><p>2-3-4树-删除-1</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://bu.dusays.com/2022/06/26/62b87f0d14a82.png data-srcset="https://bu.dusays.com/2022/06/26/62b87f0d14a82.png, https://bu.dusays.com/2022/06/26/62b87f0d14a82.png 1.5x, https://bu.dusays.com/2022/06/26/62b87f0d14a82.png 2x" data-sizes=auto alt=https://bu.dusays.com/2022/06/26/62b87f0d14a82.png></a><figcaption class=image-caption>2-3-4树-删除-1</figcaption></figure></p></li><li><p>删除元素6, 则按照规则3, 按照插入操作, 父结点满了, 再插入元素3, 此时需要分裂<figure><a class=lightgallery href=https://bu.dusays.com/2022/06/26/62b87f1010c8f.png title=2-3-4树-删除-2 data-thumbnail=https://bu.dusays.com/2022/06/26/62b87f1010c8f.png data-sub-html="<h2>2-3-4树-删除-2</h2><p>2-3-4树-删除-2</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://bu.dusays.com/2022/06/26/62b87f1010c8f.png data-srcset="https://bu.dusays.com/2022/06/26/62b87f1010c8f.png, https://bu.dusays.com/2022/06/26/62b87f1010c8f.png 1.5x, https://bu.dusays.com/2022/06/26/62b87f1010c8f.png 2x" data-sizes=auto alt=https://bu.dusays.com/2022/06/26/62b87f1010c8f.png></a><figcaption class=image-caption>2-3-4树-删除-2</figcaption></figure></p></li><li><p>删除元素6, 则按照规则4, 如果还没有结束, 则重复2-3-4<figure><a class=lightgallery href=https://bu.dusays.com/2022/06/26/62b87f15eaabd.png title=2-3-4树-删除-3 data-thumbnail=https://bu.dusays.com/2022/06/26/62b87f15eaabd.png data-sub-html="<h2>2-3-4树-删除-3</h2><p>2-3-4树-删除-3</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://bu.dusays.com/2022/06/26/62b87f15eaabd.png data-srcset="https://bu.dusays.com/2022/06/26/62b87f15eaabd.png, https://bu.dusays.com/2022/06/26/62b87f15eaabd.png 1.5x, https://bu.dusays.com/2022/06/26/62b87f15eaabd.png 2x" data-sizes=auto alt=https://bu.dusays.com/2022/06/26/62b87f15eaabd.png></a><figcaption class=image-caption>2-3-4树-删除-3</figcaption></figure></p></li></ol><h2 id=2-3-4树为什么可以保持平衡>2-3-4树为什么可以保持平衡</h2><p>根据2-3-4树的插入操作不难看出, 2-3-4树是按照向上(生成/插入父结点)和向左(生成兄弟结点)扩展的, 所以插入操作不会导致2-3-4树出现某颗子树特别高的情况.
从删除操作看, 删除某个元素之后会尽量不齐, 无法不齐的情况, 则考虑先父亲迭代(减少层数), 总之其目的是尽量保证叶子层是平的, 没有坑坑洼洼.</p></div><div class=post-footer id=post-footer><div class=orlike-box></div><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2021-02-20</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></div><div class=post-info-more><section><i class="fas fa-fw fa-th"></i>&nbsp;<a href=/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/>数据结构与算法</a></section><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/>二叉树</a>,&nbsp;<a href=/tags/2-3-4%E6%A0%91/>2-3-4树</a>,&nbsp;<a href=/tags/%E5%B9%B3%E8%A1%A1%E6%A0%91/>平衡树</a>,&nbsp;<a href=/tags/%E6%9F%A5%E6%89%BE/>查找</a>,&nbsp;<a href=/tags/%E6%90%9C%E7%B4%A2/>搜索</a></section></div><div class=post-nav><a href=/202102/salgo-binschtree/ class=prev rel=prev title=数据结构与算法之二叉查找树><i class="fas fa-angle-left fa-fw"></i>数据结构与算法之二叉查找树</a>
<a href=/202102/cpp-closure/ class=next rel=next title=C++闭包>C++闭包<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=my-random-posts><div class=loadingThree><span></span>
<span></span>
<span></span>
<span></span>
<span></span></div></div><div id=comments><div id=giscus class=comment></div><script src=https://giscus.app/client.js data-repo=caibingcheng/comment data-repo-id=R_kgDOHgda4w data-category=Announcements data-category-id=DIC_kwDOHgda484CTfDe data-mapping=og:title data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=/css/giscus.css data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script><noscript>Please enable JavaScript to view the comments powered by <a href=https://giscus.app/>giscus</a>.</noscript></div></article></div></main><footer class=footer><hr style=opacity:.2><div class=footer-container><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2020 - 2024</span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span><span class=icp-splitter>&nbsp;|&nbsp;</span><br class=icp-br><span class=icp><a href="https://icp.gov.moe/?keyword=20222231" target=_blank>萌ICP备20222231号</a></span></div><div class=footer-line><a href=https://wiki.imcbc.cn target=_blank rel=noopener title="Bing's Wiki">Wiki</a>
&nbsp;|&nbsp;
<a href=https://rssblog.cn target=_blank rel=noopener title=RSSBlog>RSSBlog</a>
&nbsp;|&nbsp;
<a href=https://travellings.link target=_blank rel=noopener title=开往-友链接力>开往-友链接力</a>
&nbsp;|&nbsp;
<a href=https://www.foreverblog.cn/go.html target=_blank>穿梭虫洞</a></div><div class=footer-line><script>var build_date="2024-03-05T21:35:50+08:00"</script>已运行
<span id=run-time></span>
&nbsp;|&nbsp;
构建于
<span id=build-time></span>&nbsp;前</div><div class=footer-line><script async src=https://npm.elemecdn.com/penndu@1.0.0/bsz.js></script>
共计
<span id=busuanzi_value_site_uv></span>&nbsp;访客
&nbsp;|&nbsp;
<span id=busuanzi_value_site_pv></span>&nbsp;访问
&nbsp;|&nbsp;
256K&nbsp;字</div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw"></i>
</a><a id=reader-button class=fixed-button title=阅读模式><i class="fa fa-book fa-fw"></i></a></div><link rel=stylesheet href=https://fastly.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/css/lightgallery.min.css><link rel=stylesheet href=https://fastly.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css><link rel=stylesheet href=https://fastly.jsdelivr.net/npm/katex@0.11.1/dist/contrib/copy-tex.min.css><script type=text/javascript src=https://cdn.staticfile.org/jquery/3.6.0/jquery.min.js></script><script type=text/javascript src=https://fastly.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js></script><script type=text/javascript src=https://fastly.jsdelivr.net/npm/autocomplete.js@0.37.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://fastly.jsdelivr.net/npm/algoliasearch@4.2.0/dist/algoliasearch-lite.umd.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=https://fastly.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/js/lightgallery.min.js></script><script type=text/javascript src=https://fastly.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js></script><script type=text/javascript src=https://fastly.jsdelivr.net/npm/lg-zoom.js@1.2.0/dist/lg-zoom.min.js></script><script type=text/javascript src=https://fastly.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js></script><script type=text/javascript src=https://fastly.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js></script><script type=text/javascript src=https://fastly.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js></script><script type=text/javascript src=https://fastly.jsdelivr.net/npm/katex@0.11.1/dist/contrib/copy-tex.min.js></script><script type=text/javascript src=https://fastly.jsdelivr.net/npm/katex@0.11.1/dist/contrib/mhchem.min.js></script><script type=text/javascript src=https://fastly.jsdelivr.net/gh/Albejr/jquery-albe-timeline/jquery-albe-timeline.min.js></script><script type=text/javascript src=https://fastly.jsdelivr.net/gh/caibingcheng/orlike@client/orlike.min.js></script><script type=text/javascript src=/js/custom.js></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:50},comment:{},lightGallery:{actualSize:!1,exThumbImage:"data-thumbnail",hideBarsDelay:2e3,selector:".lightgallery",speed:400,thumbContHeight:80,thumbWidth:80,thumbnail:!0},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{algoliaAppID:"JMTHQS1VUU",algoliaIndex:"blog-bbing",algoliaSearchKey:"0dd43732743475449c844c0d0f21366a",highlightTag:"em",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:50,type:"algolia"}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>