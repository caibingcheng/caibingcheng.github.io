<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>数据结构与算法之图 - Bing's Blog</title><meta name=keywords content="[Life bbing bing hugo Blog C++ LoveIt]"><meta name=Description content="个人技术博客"><meta property="og:title" content="数据结构与算法之图"><meta property="og:description" content="什么是图
在前面的文章中, 我们了解了树的概念, 重点是二叉树, 图在拓扑结构上和树有点类似, 但是图不是树.
直观地, 先来看一个图的拓扑结构:"><meta property="og:type" content="article"><meta property="og:url" content="https://imcbc.cn/202103/cpp-graph/"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/caibingcheng/resources@main/images/13bOkrO.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-03-09T11:14:59+08:00"><meta property="article:modified_time" content="2021-03-09T11:14:59+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://cdn.jsdelivr.net/gh/caibingcheng/resources@main/images/13bOkrO.png"><meta name=twitter:title content="数据结构与算法之图"><meta name=twitter:description content="什么是图
在前面的文章中, 我们了解了树的概念, 重点是二叉树, 图在拓扑结构上和树有点类似, 但是图不是树.
直观地, 先来看一个图的拓扑结构:"><meta name=application-name content="Bing's Blog"><meta name=apple-mobile-web-app-title content="Bing's Blog"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://imcbc.cn/202103/cpp-graph/><link rel=prev href=https://imcbc.cn/202103/cpp-what-iterator/><link rel=next href=https://imcbc.cn/202103/cpp-const-adconsexpr/><link rel=stylesheet href=https://fastly.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=https://fastly.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css><link rel=stylesheet href=https://fastly.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css><link rel=stylesheet href=https://fastly.jsdelivr.net/gh/Albejr/jquery-albe-timeline/templates/simple/style-albe-timeline.css><link rel=stylesheet href=https://fastly.jsdelivr.net/gh/caibingcheng/orlike@client/orlike.min.css><link rel=stylesheet href=/css/custom.css><meta name=google-site-verification content="xy1bCgQPV_H3_o2XD34o2mIByQxmzkV3GPOfhXg_mTM"><meta name=msvalidate.01 content="c81a65b6344571786df543a56c7bbe18"><meta name=baidu-site-verification content="code-WcyzWjgFYo"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"数据结构与算法之图","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/imcbc.cn\/202103\/cpp-graph\/"},"image":["https:\/\/imcbc.cn\/android-chrome-192x192.png"],"genre":"posts","keywords":"Cpp, 图, 搜索, DFS, BFS","wordcount":2355,"url":"https:\/\/imcbc.cn\/202103\/cpp-graph\/","datePublished":"2021-03-09T11:14:59+08:00","dateModified":"2021-03-09T11:14:59+08:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"Bing","logo":"https:\/\/imcbc.cn\/android-chrome-192x192.png"},"author":{"@type":"Person","name":"bbing"},"description":""}</script></head><body header-desktop=normal header-mobile=normal><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><a href=https://github.com/caibingcheng/ class=github-corner aria-label="View source on GitHub"><svg width="3.5rem" height="3.5rem" viewBox="0 0 250 250" style="fill:#151513;color:#fff;position:absolute;top:0;border:0;left:0;transform:scale(-1,1)" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div class=header-title><a href=/ title="Bing's Blog">Bing's Blog</a></div><div class=menu><div class=menu-inner><div class=dropdown><a href=/posts/ class="menu-item menu-more dropbtn" title><i class='fas fa fa-archive'></i> 归档</a><div class="menu-more-content dropdown-content"><a href=/tags/ title><i class='fas fa fa-tag'></i> 标签 </a><a href=/categories/ title><i class='fas fa fa-th'></i> 分类</a></div></div><a class=menu-item href=/friends/><i class='fas fa fa-users'></i> 友链</a><div class=dropdown><a href=javascript:void(0); class="menu-item menu-more dropbtn" title><i class='fas fa fa-angle-double-down'></i> 更多</a><div class="menu-more-content dropdown-content"><a href=/tools/ title><i class='fas fa fa-cubes'></i> 工具 </a><a href=/about/ title><i class='fas fa fa-address-card'></i> 关于 </a><a href=/timeline/ title><i class='fas fa fa-building'></i> 建站 </a><a href=/index.xml/ title><i class='fas fa fa-rss'></i> RSS</a></div></div><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=搜索文章内容 id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span>
</span><a href=https://travellings.link target=_blank class=menu-item rel=noopener title=开往-友链接力><i class='fas fa-fw fa-subway'></i></a>
<a href=https://rssblog.cn/bbing class=menu-item target=_blank rel=noopener title=RSSBlog><i class='fas fa-fw fa-inbox'></i></a>
<a href=https://www.foreverblog.cn/go.html class=menu-item target=_blank rel=noopener title=穿梭虫洞><i class="fas fa-fw fa-life-ring" title=穿梭虫洞-随机访问十年之约友链博客></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Bing's Blog">Bing's Blog</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章内容 id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></div><a href=/posts/ class=menu-item title><i class='fas fa fa-archive'></i> 归档</a>
<a href=/tags/ class=menu-item title><i class='fas fa fa-tag'></i> 标签</a>
<a href=/categories/ class=menu-item title><i class='fas fa fa-th'></i> 分类</a>
<a class=menu-item href=/friends/><i class='fas fa fa-users'></i> 友链</a>
<a href=/tools/ class=menu-item title><i class='fas fa fa-cubes'></i> 工具</a>
<a href=/about/ class=menu-item title><i class='fas fa fa-address-card'></i> 关于</a>
<a href=/timeline/ class=menu-item title><i class='fas fa fa-building'></i> 建站</a>
<a href=/index.xml/ class=menu-item title><i class='fas fa fa-rss'></i> RSS</a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class=single-title>数据结构与算法之图<sup>
<a id=reader-button-title title=阅读模式><i class="fa fa-book fa-fw"></i></a></sup></h1><div class=post-meta><div class=post-meta-line></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2021-03-09>2021-03-09</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 2355 字&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 5 分钟&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#什么是图>什么是图</a><ul><li><a href=#图的类比对象>图的类比对象</a></li></ul></li><li><a href=#邻接表存储法>邻接表存储法</a></li><li><a href=#广度优先搜索bfs>广度优先搜索(BFS)</a></li><li><a href=#深度优先搜索dfs>深度优先搜索(DFS)</a></li></ul></nav></div></div><div class=content id=content><h2 id=什么是图>什么是图</h2><p>在前面的文章中, 我们了解了树的概念, 重点是二叉树, 图在拓扑结构上和树有点类似, 但是图不是树.</p><p>直观地, 先来看一个图的拓扑结构:</p><p><figure><a class=lightgallery href=https://bu.dusays.com/2022/06/26/62b87f3a92fc5.png title=&amp;ldquo;无向图&amp;rdquo; data-thumbnail=https://bu.dusays.com/2022/06/26/62b87f3a92fc5.png data-sub-html="<h2>无向图</h2><p>&amp;ldquo;无向图&amp;rdquo;</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://bu.dusays.com/2022/06/26/62b87f3a92fc5.png data-srcset="https://bu.dusays.com/2022/06/26/62b87f3a92fc5.png, https://bu.dusays.com/2022/06/26/62b87f3a92fc5.png 1.5x, https://bu.dusays.com/2022/06/26/62b87f3a92fc5.png 2x" data-sizes=auto alt=https://bu.dusays.com/2022/06/26/62b87f3a92fc5.png></a><figcaption class=image-caption>无向图</figcaption></figure></p><p>上述展示的是无向图, 无向图就是没有方向的图, 只要两个结点之间是联通的, 就可以从一个结点到另外一个结点.</p><p>我们可以将其理解为简化后的地图, A-G代表的是地点.</p><p>一般地, 对图我们有以下的一般性概念:</p><ul><li>图的结点叫做顶点;</li><li>顶点(结点)之间的连接叫做边;</li><li>一个顶点(结点)有多少条边叫做这个顶点(结点)的度;</li></ul><p>对应的, 还有有向图, 有向图就是有方向的图, 链接的两个顶点的边有方向, 可以从一个顶点到另外一个顶点, 如果两个顶点互通, 则至少要有两条不同方向的边.</p><p>有向图类似于行车单向道.</p><p><figure><a class=lightgallery href=https://bu.dusays.com/2022/06/26/62b87f3cdfbd9.png title=&amp;ldquo;有向图&amp;rdquo; data-thumbnail=https://bu.dusays.com/2022/06/26/62b87f3cdfbd9.png data-sub-html="<h2>有向图</h2><p>&amp;ldquo;有向图&amp;rdquo;</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://bu.dusays.com/2022/06/26/62b87f3cdfbd9.png data-srcset="https://bu.dusays.com/2022/06/26/62b87f3cdfbd9.png, https://bu.dusays.com/2022/06/26/62b87f3cdfbd9.png 1.5x, https://bu.dusays.com/2022/06/26/62b87f3cdfbd9.png 2x" data-sizes=auto alt=https://bu.dusays.com/2022/06/26/62b87f3cdfbd9.png></a><figcaption class=image-caption>有向图</figcaption></figure></p><p>有向图的边可能从一个顶点指出, 也可能指向一个顶点, 我们把从顶点指出的边的数量叫做这个顶点的出度, 指向一个顶点的边的数量叫做这个顶点的入度.</p><p>类比于地图, 两顶点之间的边不仅可以表示联通关系, 还可以表示距离, 给每条边带上一个"距离"参数(权重), 这样的图叫做带权图:</p><p><figure><a class=lightgallery href=https://bu.dusays.com/2022/06/26/62b87f3f0b784.png title=&amp;ldquo;带权图&amp;rdquo; data-thumbnail=https://bu.dusays.com/2022/06/26/62b87f3f0b784.png data-sub-html="<h2>带权图</h2><p>&amp;ldquo;带权图&amp;rdquo;</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://bu.dusays.com/2022/06/26/62b87f3f0b784.png data-srcset="https://bu.dusays.com/2022/06/26/62b87f3f0b784.png, https://bu.dusays.com/2022/06/26/62b87f3f0b784.png 1.5x, https://bu.dusays.com/2022/06/26/62b87f3f0b784.png 2x" data-sizes=auto alt=https://bu.dusays.com/2022/06/26/62b87f3f0b784.png></a><figcaption class=image-caption>带权图</figcaption></figure></p><h3 id=图的类比对象>图的类比对象</h3><p>用图这种数据结构可以表示日常生活中的一些常用对象, 这里举一些例子:</p><ul><li>地图可以用图表示, 顶点就是地点, 边就是两个地点之间的路径, 边带上权重就可以表示距离;</li><li>好友关系也可以用图表示, 顶点就是每个个体, 边表示这两个个体之间是否有联系, 边带上权重可以表示好感度;</li><li>编译器也用到了图, C/C++编译时的头文件include就可以用图的顶点表示, 有向边可以表示依赖关系;</li></ul><h2 id=邻接表存储法>邻接表存储法</h2><p>图如何存储?</p><p>很直观的时类似树一样的存储方法, 用链表表示图的拓扑结构. 但是这种方法的问题在于不知道图的每个顶点会有多少条边, 所以不太好定义结构体.</p><p>邻接表存储法也是使用链表存储的方法, 它把每个顶点表示为链表的头, 后继结点则是与顶点连接的其他顶点, 如下图表示无向图的邻接表存储法:</p><p><figure><a class=lightgallery href=https://bu.dusays.com/2022/06/26/62b87f42a914f.png title=&amp;ldquo;邻接表存储法&amp;rdquo; data-thumbnail=https://bu.dusays.com/2022/06/26/62b87f42a914f.png data-sub-html="<h2>邻接表存储法</h2><p>&amp;ldquo;邻接表存储法&amp;rdquo;</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://bu.dusays.com/2022/06/26/62b87f42a914f.png data-srcset="https://bu.dusays.com/2022/06/26/62b87f42a914f.png, https://bu.dusays.com/2022/06/26/62b87f42a914f.png 1.5x, https://bu.dusays.com/2022/06/26/62b87f42a914f.png 2x" data-sizes=auto alt=https://bu.dusays.com/2022/06/26/62b87f42a914f.png></a><figcaption class=image-caption>邻接表存储法</figcaption></figure></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C++ data-lang=C++><span class=line><span class=cl><span class=k>template</span> <span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Graph</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>T</span> <span class=n>val</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>vector</span><span class=o>&lt;</span><span class=n>Graph</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;*&gt;</span> <span class=n>link</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><p>以上, <code>val</code>表示顶点的值, <code>link</code>中则是存与这个顶点联通的其他顶点.</p><p>这里的<code>link</code>看起来是顺序存储, 如果查找与顶点连接的某个其他顶点时, 时间复杂度时$O(n)$, 我们可以使用查找二叉树或者红黑树等结构来替代顺序结构, 提高查找效率, 具体使用的数据结构还需根据具体场景分析.</p><h2 id=广度优先搜索bfs>广度优先搜索(BFS)</h2><blockquote><p>图的搜索/遍历和树类似, 需要注意的就是图可以有回环, 不要陷入死循环即可.</p></blockquote><p>广度优先搜索是先访问起始结点的所有子结点, 再访问子结点的所有子结点, 从树的结构来看, 是一层一层的访问.</p><p>下面我们用树的结构来展示一下BFS是怎么搜索的:</p><p><figure><a class=lightgallery href=https://bu.dusays.com/2022/06/26/62b87f45816f3.png title=&amp;ldquo;BFS&amp;rdquo; data-thumbnail=https://bu.dusays.com/2022/06/26/62b87f45816f3.png data-sub-html="<h2>BFS</h2><p>&amp;ldquo;BFS&amp;rdquo;</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://bu.dusays.com/2022/06/26/62b87f45816f3.png data-srcset="https://bu.dusays.com/2022/06/26/62b87f45816f3.png, https://bu.dusays.com/2022/06/26/62b87f45816f3.png 1.5x, https://bu.dusays.com/2022/06/26/62b87f45816f3.png 2x" data-sizes=auto alt=https://bu.dusays.com/2022/06/26/62b87f45816f3.png></a><figcaption class=image-caption>BFS</figcaption></figure></p><p>先定义图的结构:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C++ data-lang=C++><span class=line><span class=cl><span class=k>template</span> <span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Graph</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>T</span> <span class=n>val</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>vector</span><span class=o>&lt;</span><span class=n>Graph</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;*&gt;</span> <span class=n>link</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>Graph</span><span class=p>(</span><span class=k>const</span> <span class=n>T</span><span class=o>&amp;</span> <span class=n>v</span><span class=p>)</span> <span class=o>:</span> <span class=n>val</span><span class=p>(</span><span class=n>v</span><span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=n>Map</span> <span class=o>=</span> <span class=n>Graph</span><span class=o>&lt;</span><span class=kt>char</span><span class=o>&gt;</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>我们的主函数, 使用上文中的无向图:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C++ data-lang=C++><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>char</span><span class=o>&gt;&gt;</span> <span class=n>link_map</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=sc>&#39;A&#39;</span><span class=p>,</span> <span class=sc>&#39;B&#39;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=sc>&#39;B&#39;</span><span class=p>,</span> <span class=sc>&#39;A&#39;</span><span class=p>,</span> <span class=sc>&#39;C&#39;</span><span class=p>,</span> <span class=sc>&#39;E&#39;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=sc>&#39;C&#39;</span><span class=p>,</span> <span class=sc>&#39;B&#39;</span><span class=p>,</span> <span class=sc>&#39;D&#39;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=sc>&#39;D&#39;</span><span class=p>,</span> <span class=sc>&#39;C&#39;</span><span class=p>,</span> <span class=sc>&#39;E&#39;</span><span class=p>,</span> <span class=sc>&#39;G&#39;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=sc>&#39;E&#39;</span><span class=p>,</span> <span class=sc>&#39;B&#39;</span><span class=p>,</span> <span class=sc>&#39;D&#39;</span><span class=p>,</span> <span class=sc>&#39;F&#39;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=sc>&#39;F&#39;</span><span class=p>,</span> <span class=sc>&#39;E&#39;</span><span class=p>,</span> <span class=sc>&#39;G&#39;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=sc>&#39;G&#39;</span><span class=p>,</span> <span class=sc>&#39;D&#39;</span><span class=p>,</span> <span class=sc>&#39;F&#39;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>auto</span> <span class=n>graph</span> <span class=o>=</span> <span class=n>initGraph</span><span class=p>(</span><span class=n>link_map</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p><code>link_map</code>的条元素的第一个元素代表顶点, 之后的元素则代表与该顶点连接的其他顶点;</p><p>编写一个图打印函数, 用来输出使用邻接表存储法的图:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C++ data-lang=C++><span class=line><span class=cl><span class=kt>void</span> <span class=nf>printGraph</span><span class=p>(</span><span class=k>const</span> <span class=n>vector</span><span class=o>&lt;</span><span class=n>Map</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>graph</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>using</span> <span class=n>std</span><span class=o>::</span><span class=n>begin</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>using</span> <span class=n>std</span><span class=o>::</span><span class=n>end</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>for_each</span><span class=p>(</span><span class=n>begin</span><span class=p>(</span><span class=n>graph</span><span class=p>),</span> <span class=n>end</span><span class=p>(</span><span class=n>graph</span><span class=p>),</span> <span class=p>[](</span><span class=k>auto</span><span class=o>&amp;</span> <span class=n>g</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>g</span><span class=p>.</span><span class=n>val</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;(&#34;</span> <span class=o>&lt;&lt;</span> <span class=o>&amp;</span><span class=n>g</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;)&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>auto</span> <span class=o>&amp;</span><span class=n>link</span> <span class=o>=</span> <span class=n>g</span><span class=p>.</span><span class=n>link</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>for_each</span><span class=p>(</span><span class=n>begin</span><span class=p>(</span><span class=n>link</span><span class=p>),</span> <span class=n>end</span><span class=p>(</span><span class=n>link</span><span class=p>),</span> <span class=p>[](</span><span class=k>auto</span><span class=o>&amp;</span> <span class=n>l</span><span class=p>){</span>
</span></span><span class=line><span class=cl>            <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;-&gt;&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>l</span><span class=o>-&gt;</span><span class=n>val</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;(&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>l</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;)&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>将图的初始化数据转化为邻接表存储:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C++ data-lang=C++><span class=line><span class=cl><span class=n>vector</span><span class=o>&lt;</span><span class=n>Map</span><span class=o>&gt;</span> <span class=n>initGraph</span><span class=p>(</span><span class=k>const</span> <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>char</span><span class=o>&gt;&gt;</span> <span class=o>&amp;</span><span class=n>link_map</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>using</span> <span class=n>std</span><span class=o>::</span><span class=n>next</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>using</span> <span class=n>std</span><span class=o>::</span><span class=n>begin</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>using</span> <span class=n>std</span><span class=o>::</span><span class=n>end</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>vector</span><span class=o>&lt;</span><span class=n>Map</span><span class=o>&gt;</span> <span class=n>graph</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>unordered_map</span><span class=o>&lt;</span><span class=kt>char</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;</span> <span class=n>map_map</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>pos</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=o>&amp;</span><span class=nl>link</span> <span class=p>:</span> <span class=n>link_map</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>const</span> <span class=kt>char</span><span class=o>&amp;</span> <span class=n>c</span> <span class=o>=</span> <span class=n>link</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=n>Map</span> <span class=nf>g</span><span class=p>(</span><span class=n>c</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>graph</span><span class=p>.</span><span class=n>emplace_back</span><span class=p>(</span><span class=n>g</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>map_map</span><span class=p>.</span><span class=n>emplace</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=n>pos</span><span class=o>++</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>auto</span> <span class=n>g</span> <span class=o>=</span> <span class=n>begin</span><span class=p>(</span><span class=n>graph</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=o>&amp;</span><span class=nl>link</span> <span class=p>:</span> <span class=n>link_map</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>for_each</span><span class=p>(</span><span class=n>next</span><span class=p>(</span><span class=n>begin</span><span class=p>(</span><span class=n>link</span><span class=p>)),</span> <span class=n>end</span><span class=p>(</span><span class=n>link</span><span class=p>),</span> <span class=p>[</span><span class=o>&amp;</span><span class=p>](</span><span class=k>auto</span><span class=o>&amp;</span> <span class=n>c</span><span class=p>){</span>
</span></span><span class=line><span class=cl>            <span class=n>pos</span> <span class=o>=</span> <span class=n>map_map</span><span class=p>[</span><span class=n>c</span><span class=p>];</span>
</span></span><span class=line><span class=cl>            <span class=k>auto</span> <span class=n>pg</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>graph</span><span class=p>[</span><span class=n>pos</span><span class=p>];</span>
</span></span><span class=line><span class=cl>            <span class=n>g</span><span class=o>-&gt;</span><span class=n>link</span><span class=p>.</span><span class=n>emplace_back</span><span class=p>(</span><span class=n>pg</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=n>g</span> <span class=o>=</span> <span class=n>next</span><span class=p>(</span><span class=n>g</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>printGraph</span><span class=p>(</span><span class=n>graph</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>graph</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>初始化graph后, 我们得到输出:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Shell data-lang=Shell><span class=line><span class=cl>A<span class=o>(</span>0x11852a0<span class=o>)</span>-&gt;B<span class=o>(</span>0x11852c0<span class=o>)</span>
</span></span><span class=line><span class=cl>B<span class=o>(</span>0x11852c0<span class=o>)</span>-&gt;A<span class=o>(</span>0x11852a0<span class=o>)</span>-&gt;C<span class=o>(</span>0x11852e0<span class=o>)</span>-&gt;E<span class=o>(</span>0x1185320<span class=o>)</span>
</span></span><span class=line><span class=cl>C<span class=o>(</span>0x11852e0<span class=o>)</span>-&gt;B<span class=o>(</span>0x11852c0<span class=o>)</span>-&gt;D<span class=o>(</span>0x1185300<span class=o>)</span>
</span></span><span class=line><span class=cl>D<span class=o>(</span>0x1185300<span class=o>)</span>-&gt;C<span class=o>(</span>0x11852e0<span class=o>)</span>-&gt;E<span class=o>(</span>0x1185320<span class=o>)</span>-&gt;G<span class=o>(</span>0x1185360<span class=o>)</span>
</span></span><span class=line><span class=cl>E<span class=o>(</span>0x1185320<span class=o>)</span>-&gt;B<span class=o>(</span>0x11852c0<span class=o>)</span>-&gt;D<span class=o>(</span>0x1185300<span class=o>)</span>-&gt;F<span class=o>(</span>0x1185340<span class=o>)</span>
</span></span><span class=line><span class=cl>F<span class=o>(</span>0x1185340<span class=o>)</span>-&gt;E<span class=o>(</span>0x1185320<span class=o>)</span>-&gt;G<span class=o>(</span>0x1185360<span class=o>)</span>
</span></span><span class=line><span class=cl>G<span class=o>(</span>0x1185360<span class=o>)</span>-&gt;D<span class=o>(</span>0x1185300<span class=o>)</span>-&gt;F<span class=o>(</span>0x1185340<span class=o>)</span>
</span></span></code></pre></td></tr></table></div></div><p>针对广度优先搜索算法, 我们使用<code>open-close</code>表实现.</p><ul><li><strong>open表</strong>中存储接下来需要访问的结点, 一般可以用双端队列;</li><li><strong>close表</strong>中存储已经访问过的结点, 一般可以用任意容器;</li></ul><p>接下来确定对每个结点的操作:</p><ul><li>判断结点是否已经被访问过(是否在<strong>close表</strong>中):</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C++ data-lang=C++><span class=line><span class=cl><span class=k>using</span> <span class=n>std</span><span class=o>::</span><span class=n>begin</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=n>std</span><span class=o>::</span><span class=n>end</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>auto</span> <span class=n>isInClose</span> <span class=o>=</span> <span class=p>[</span><span class=o>&amp;</span><span class=n>vclose</span><span class=p>](</span><span class=k>auto</span><span class=o>&amp;</span> <span class=n>node</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=k>auto</span> <span class=n>node_pos</span> <span class=o>=</span> <span class=n>find_if</span><span class=p>(</span><span class=n>begin</span><span class=p>(</span><span class=n>vclose</span><span class=p>),</span> <span class=n>end</span><span class=p>(</span><span class=n>vclose</span><span class=p>),</span> <span class=p>[</span><span class=o>&amp;</span><span class=p>](</span><span class=k>auto</span><span class=o>&amp;</span> <span class=n>cnode</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>cnode</span> <span class=o>==</span> <span class=n>node</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>node_pos</span> <span class=o>!=</span> <span class=n>end</span><span class=p>(</span><span class=n>vclose</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>将接下来需要访问的结点放到open表:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C++ data-lang=C++><span class=line><span class=cl><span class=k>auto</span> <span class=n>openPush</span> <span class=o>=</span> <span class=p>[</span><span class=o>&amp;</span><span class=n>vopen</span><span class=p>](</span><span class=k>auto</span><span class=o>&amp;</span> <span class=n>node</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=n>vopen</span><span class=p>.</span><span class=n>emplace_back</span><span class=p>(</span><span class=n>node</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>从open表中取出结点, 并访问:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C++ data-lang=C++><span class=line><span class=cl><span class=k>auto</span> <span class=n>openGet</span> <span class=o>=</span> <span class=p>[</span><span class=o>&amp;</span><span class=n>vopen</span><span class=p>](){</span>
</span></span><span class=line><span class=cl>    <span class=k>auto</span> <span class=n>node</span> <span class=o>=</span> <span class=n>vopen</span><span class=p>.</span><span class=n>front</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=n>vopen</span><span class=p>.</span><span class=n>pop_front</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>node</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><p>这里要注意<strong>open表</strong>的操作, push的时候是将结点push到末尾, 取元素时则是从头开始取.</p><ul><li>对结点处理, 简单起见, 这里使用cout</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C++ data-lang=C++><span class=line><span class=cl><span class=k>auto</span> <span class=n>processNode</span> <span class=o>=</span> <span class=p>[](</span><span class=k>auto</span><span class=o>&amp;</span> <span class=n>node</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>node</span><span class=o>-&gt;</span><span class=n>val</span> <span class=o>&lt;&lt;</span> <span class=s>&#34; &#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><p>有了上述基本操作, 广度优先遍历实现如下:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C++ data-lang=C++><span class=line><span class=cl><span class=kt>void</span> <span class=nf>algoBFS</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>Map</span><span class=o>&gt;&amp;</span> <span class=n>graph</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>deque</span><span class=o>&lt;</span><span class=n>Map</span><span class=o>*&gt;</span> <span class=n>vopen</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>vector</span><span class=o>&lt;</span><span class=n>Map</span><span class=o>*&gt;</span> <span class=n>vclose</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>auto</span> <span class=n>isInClose</span> <span class=o>=</span> <span class=p>[</span><span class=o>&amp;</span><span class=n>vclose</span><span class=p>](</span><span class=k>auto</span><span class=o>&amp;</span> <span class=n>node</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=k>auto</span> <span class=n>node_pos</span> <span class=o>=</span> <span class=n>find_if</span><span class=p>(</span><span class=n>begin</span><span class=p>(</span><span class=n>vclose</span><span class=p>),</span> <span class=n>end</span><span class=p>(</span><span class=n>vclose</span><span class=p>),</span> <span class=p>[</span><span class=o>&amp;</span><span class=p>](</span><span class=k>auto</span><span class=o>&amp;</span> <span class=n>cnode</span><span class=p>){</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>cnode</span> <span class=o>==</span> <span class=n>node</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>node_pos</span> <span class=o>!=</span> <span class=n>end</span><span class=p>(</span><span class=n>vclose</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>auto</span> <span class=n>openPush</span> <span class=o>=</span> <span class=p>[</span><span class=o>&amp;</span><span class=n>vopen</span><span class=p>](</span><span class=k>auto</span><span class=o>&amp;</span> <span class=n>node</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=n>vopen</span><span class=p>.</span><span class=n>emplace_back</span><span class=p>(</span><span class=n>node</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>auto</span> <span class=n>openGet</span> <span class=o>=</span> <span class=p>[</span><span class=o>&amp;</span><span class=n>vopen</span><span class=p>](){</span>
</span></span><span class=line><span class=cl>        <span class=k>auto</span> <span class=n>node</span> <span class=o>=</span> <span class=n>vopen</span><span class=p>.</span><span class=n>front</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=n>vopen</span><span class=p>.</span><span class=n>pop_front</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>node</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>auto</span> <span class=n>processNode</span> <span class=o>=</span> <span class=p>[](</span><span class=k>auto</span><span class=o>&amp;</span> <span class=n>node</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>node</span><span class=o>-&gt;</span><span class=n>val</span> <span class=o>&lt;&lt;</span> <span class=s>&#34; &#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>auto</span> <span class=n>node</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>graph</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=n>openPush</span><span class=p>(</span><span class=n>node</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>do</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>node</span> <span class=o>=</span> <span class=n>openGet</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>isInClose</span><span class=p>(</span><span class=n>node</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>processNode</span><span class=p>(</span><span class=n>node</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>vclose</span><span class=p>.</span><span class=n>emplace_back</span><span class=p>(</span><span class=n>node</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span><span class=p>(</span><span class=k>auto</span><span class=o>&amp;</span> <span class=nl>l</span> <span class=p>:</span> <span class=n>node</span><span class=o>-&gt;</span><span class=n>link</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>isInClose</span><span class=p>(</span><span class=n>l</span><span class=p>))</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>openPush</span><span class=p>(</span><span class=n>l</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span><span class=k>while</span><span class=p>(</span><span class=o>!</span><span class=n>vopen</span><span class=p>.</span><span class=n>empty</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>输出得到:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Shell data-lang=Shell><span class=line><span class=cl>A B C E D F G
</span></span></code></pre></td></tr></table></div></div><h2 id=深度优先搜索dfs>深度优先搜索(DFS)</h2><p>深度优先搜索从树的结构来看就是从根结点一直访问到叶子结点.</p><p>下面我们用树的结构来展示一下DFS是怎么搜索的:</p><p><figure><a class=lightgallery href=https://bu.dusays.com/2022/06/26/62b87f48456a7.png title=&amp;ldquo;DFS&amp;rdquo; data-thumbnail=https://bu.dusays.com/2022/06/26/62b87f48456a7.png data-sub-html="<h2>DFS</h2><p>&amp;ldquo;DFS&amp;rdquo;</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://bu.dusays.com/2022/06/26/62b87f48456a7.png data-srcset="https://bu.dusays.com/2022/06/26/62b87f48456a7.png, https://bu.dusays.com/2022/06/26/62b87f48456a7.png 1.5x, https://bu.dusays.com/2022/06/26/62b87f48456a7.png 2x" data-sizes=auto alt=https://bu.dusays.com/2022/06/26/62b87f48456a7.png></a><figcaption class=image-caption>DFS</figcaption></figure></p><p>深度优先搜索的逻辑和广度优先搜索基本一样, 区别在于从open表中取值的方式不同.</p><p>在广度优先搜索中, 我们将待访问结点push到<strong>open表</strong>的末尾, 再从<strong>open表</strong>的表头拿下一个访问的结点, 这样的结果就是先访问了结点的所有子结点, 再访问子结点的所有子结点.</p><p>深度优先搜索是将待访问结点push到<strong>open表</strong>的末尾, 再从<strong>open表</strong>的末尾拿下一个访问的结点, 这样相当于是从一个几点一直追溯子结点, 直到末尾, 如此往复.</p><p>以下是深度优先搜索中的<code>openGet</code>操作:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C++ data-lang=C++><span class=line><span class=cl><span class=k>auto</span> <span class=n>openGet</span> <span class=o>=</span> <span class=p>[</span><span class=o>&amp;</span><span class=n>vopen</span><span class=p>](){</span>
</span></span><span class=line><span class=cl>    <span class=k>auto</span> <span class=n>node</span> <span class=o>=</span> <span class=n>vopen</span><span class=p>.</span><span class=n>back</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=n>vopen</span><span class=p>.</span><span class=n>pop_back</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>node</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><p>完整实现如下:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C++ data-lang=C++><span class=line><span class=cl><span class=kt>void</span> <span class=nf>algoDFS</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>Map</span><span class=o>&gt;&amp;</span> <span class=n>graph</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>deque</span><span class=o>&lt;</span><span class=n>Map</span><span class=o>*&gt;</span> <span class=n>vopen</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>vector</span><span class=o>&lt;</span><span class=n>Map</span><span class=o>*&gt;</span> <span class=n>vclose</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>using</span> <span class=n>std</span><span class=o>::</span><span class=n>begin</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>using</span> <span class=n>std</span><span class=o>::</span><span class=n>end</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>auto</span> <span class=n>isInClose</span> <span class=o>=</span> <span class=p>[</span><span class=o>&amp;</span><span class=n>vclose</span><span class=p>](</span><span class=k>auto</span><span class=o>&amp;</span> <span class=n>node</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=k>auto</span> <span class=n>node_pos</span> <span class=o>=</span> <span class=n>find_if</span><span class=p>(</span><span class=n>begin</span><span class=p>(</span><span class=n>vclose</span><span class=p>),</span> <span class=n>end</span><span class=p>(</span><span class=n>vclose</span><span class=p>),</span> <span class=p>[</span><span class=o>&amp;</span><span class=p>](</span><span class=k>auto</span><span class=o>&amp;</span> <span class=n>cnode</span><span class=p>){</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>cnode</span> <span class=o>==</span> <span class=n>node</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>node_pos</span> <span class=o>!=</span> <span class=n>end</span><span class=p>(</span><span class=n>vclose</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>auto</span> <span class=n>openPush</span> <span class=o>=</span> <span class=p>[</span><span class=o>&amp;</span><span class=n>vopen</span><span class=p>](</span><span class=k>auto</span><span class=o>&amp;</span> <span class=n>node</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=n>vopen</span><span class=p>.</span><span class=n>emplace_back</span><span class=p>(</span><span class=n>node</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>auto</span> <span class=n>openGet</span> <span class=o>=</span> <span class=p>[</span><span class=o>&amp;</span><span class=n>vopen</span><span class=p>](){</span>
</span></span><span class=line><span class=cl>        <span class=k>auto</span> <span class=n>node</span> <span class=o>=</span> <span class=n>vopen</span><span class=p>.</span><span class=n>back</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=n>vopen</span><span class=p>.</span><span class=n>pop_back</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>node</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>auto</span> <span class=n>processNode</span> <span class=o>=</span> <span class=p>[](</span><span class=k>auto</span><span class=o>&amp;</span> <span class=n>node</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>node</span><span class=o>-&gt;</span><span class=n>val</span> <span class=o>&lt;&lt;</span> <span class=s>&#34; &#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>auto</span> <span class=n>node</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>graph</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=n>openPush</span><span class=p>(</span><span class=n>node</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>do</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>node</span> <span class=o>=</span> <span class=n>openGet</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>isInClose</span><span class=p>(</span><span class=n>node</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>processNode</span><span class=p>(</span><span class=n>node</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>vclose</span><span class=p>.</span><span class=n>emplace_back</span><span class=p>(</span><span class=n>node</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span><span class=p>(</span><span class=k>auto</span><span class=o>&amp;</span> <span class=nl>l</span> <span class=p>:</span> <span class=n>node</span><span class=o>-&gt;</span><span class=n>link</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>isInClose</span><span class=p>(</span><span class=n>l</span><span class=p>))</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>openPush</span><span class=p>(</span><span class=n>l</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span><span class=k>while</span><span class=p>(</span><span class=o>!</span><span class=n>vopen</span><span class=p>.</span><span class=n>empty</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>输出得到:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Shell data-lang=Shell><span class=line><span class=cl>A B E F G D C
</span></span></code></pre></td></tr></table></div></div></div><div class=post-footer id=post-footer><div class=orlike-box></div><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2021-03-09</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></div><div class=post-info-more><section><i class="fas fa-fw fa-th"></i>&nbsp;<a href=/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/>数据结构与算法</a>,&nbsp;<a href=/categories/cpp/>Cpp</a></section><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/cpp/>Cpp</a>,&nbsp;<a href=/tags/%E5%9B%BE/>图</a>,&nbsp;<a href=/tags/%E6%90%9C%E7%B4%A2/>搜索</a>,&nbsp;<a href=/tags/dfs/>DFS</a>,&nbsp;<a href=/tags/bfs/>BFS</a></section></div><div class=post-nav><a href=/202103/cpp-what-iterator/ class=prev rel=prev title=STL-迭代器><i class="fas fa-angle-left fa-fw"></i>STL-迭代器</a>
<a href=/202103/cpp-const-adconsexpr/ class=next rel=next title=const和constexpr>const和constexpr<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=my-random-posts><div class=loadingThree><span></span>
<span></span>
<span></span>
<span></span>
<span></span></div></div><div id=comments><div id=giscus class=comment></div><script src=https://giscus.app/client.js data-repo=caibingcheng/comment data-repo-id=R_kgDOHgda4w data-category=Announcements data-category-id=DIC_kwDOHgda484CTfDe data-mapping=og:title data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=/css/giscus.css data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script><noscript>Please enable JavaScript to view the comments powered by <a href=https://giscus.app/>giscus</a>.</noscript></div></article></div></main><footer class=footer><hr style=opacity:.2><div class=footer-container><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2020 - 2024</span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span><span class=icp-splitter>&nbsp;|&nbsp;</span><br class=icp-br><span class=icp><a href="https://icp.gov.moe/?keyword=20222231" target=_blank>萌ICP备20222231号</a></span></div><div class=footer-line><a href=https://wiki.imcbc.cn target=_blank rel=noopener title="Bing's Wiki">Wiki</a>
&nbsp;|&nbsp;
<a href=https://rssblog.cn target=_blank rel=noopener title=RSSBlog>RSSBlog</a>
&nbsp;|&nbsp;
<a href=https://travellings.link target=_blank rel=noopener title=开往-友链接力>开往-友链接力</a>
&nbsp;|&nbsp;
<a href=https://www.foreverblog.cn/go.html target=_blank>穿梭虫洞</a></div><div class=footer-line><script>var build_date="2024-03-05T21:35:50+08:00"</script>已运行
<span id=run-time></span>
&nbsp;|&nbsp;
构建于
<span id=build-time></span>&nbsp;前</div><div class=footer-line><script async src=https://npm.elemecdn.com/penndu@1.0.0/bsz.js></script>
共计
<span id=busuanzi_value_site_uv></span>&nbsp;访客
&nbsp;|&nbsp;
<span id=busuanzi_value_site_pv></span>&nbsp;访问
&nbsp;|&nbsp;
256K&nbsp;字</div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw"></i>
</a><a id=reader-button class=fixed-button title=阅读模式><i class="fa fa-book fa-fw"></i></a></div><link rel=stylesheet href=https://fastly.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/css/lightgallery.min.css><link rel=stylesheet href=https://fastly.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css><link rel=stylesheet href=https://fastly.jsdelivr.net/npm/katex@0.11.1/dist/contrib/copy-tex.min.css><script type=text/javascript src=https://cdn.staticfile.org/jquery/3.6.0/jquery.min.js></script><script type=text/javascript src=https://fastly.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js></script><script type=text/javascript src=https://fastly.jsdelivr.net/npm/autocomplete.js@0.37.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://fastly.jsdelivr.net/npm/algoliasearch@4.2.0/dist/algoliasearch-lite.umd.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=https://fastly.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/js/lightgallery.min.js></script><script type=text/javascript src=https://fastly.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js></script><script type=text/javascript src=https://fastly.jsdelivr.net/npm/lg-zoom.js@1.2.0/dist/lg-zoom.min.js></script><script type=text/javascript src=https://fastly.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js></script><script type=text/javascript src=https://fastly.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js></script><script type=text/javascript src=https://fastly.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js></script><script type=text/javascript src=https://fastly.jsdelivr.net/npm/katex@0.11.1/dist/contrib/copy-tex.min.js></script><script type=text/javascript src=https://fastly.jsdelivr.net/npm/katex@0.11.1/dist/contrib/mhchem.min.js></script><script type=text/javascript src=https://fastly.jsdelivr.net/gh/Albejr/jquery-albe-timeline/jquery-albe-timeline.min.js></script><script type=text/javascript src=https://fastly.jsdelivr.net/gh/caibingcheng/orlike@client/orlike.min.js></script><script type=text/javascript src=/js/custom.js></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:50},comment:{},lightGallery:{actualSize:!1,exThumbImage:"data-thumbnail",hideBarsDelay:2e3,selector:".lightgallery",speed:400,thumbContHeight:80,thumbWidth:80,thumbnail:!0},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{algoliaAppID:"JMTHQS1VUU",algoliaIndex:"blog-bbing",algoliaSearchKey:"0dd43732743475449c844c0d0f21366a",highlightTag:"em",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:50,type:"algolia"}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>